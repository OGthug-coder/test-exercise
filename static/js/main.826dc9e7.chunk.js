(this["webpackJsonptest-exercise"]=this["webpackJsonptest-exercise"]||[]).push([[0],{14:function(t,e,n){},16:function(t,e,n){"use strict";n.r(e);var c=n(1),s=n.n(c),a=n(7),r=n.n(a),o=(n(14),n(8)),i=n(4),l=n(2),u=n(0);var d=function(t){var e=Object(c.useState)(""),n=Object(l.a)(e,2),s=n[0],a=n[1],r=Object(c.useState)(!1),o=Object(l.a)(r,2),i=o[0],d=o[1];return Object(u.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s.trim()&&(t.addTask(s,i),a(""),d(!1))},children:[Object(u.jsx)("h2",{className:"label-wrapper",children:Object(u.jsx)("label",{htmlFor:"new-todo-input",className:"label__lg",children:"Add a note:"})}),Object(u.jsxs)("div",{className:"input-container",children:[Object(u.jsx)("input",{type:"text",id:"new-todo-input",className:"input input__lg",name:"text",autoComplete:"off",value:s,onChange:function(t){a(t.target.value)}}),Object(u.jsxs)("div",{className:"checkbox-container",children:[Object(u.jsx)("p",{children:"important: "}),Object(u.jsx)("input",{className:"checkbox",type:"checkbox",checked:i,onChange:function(t){var e=t.target.checked;d(e)}})]})]}),Object(u.jsx)("button",{type:"submit",className:"btn btn__primary btn__lg",children:"Add"})]})};var b=function(t){return Object(u.jsxs)("button",{type:"button",className:"btn toggle-btn","aria-pressed":t.isPressed,onClick:function(){return t.setFilter(t.text)},children:[Object(u.jsx)("span",{className:"visually-hidden",children:"Show "}),Object(u.jsx)("span",{children:t.text}),Object(u.jsx)("span",{className:"visually-hidden",children:" tasks"})]})},j=n.p+"static/media/important.d913b7d1.png";function p(t){var e=Object(c.useState)(!1),n=Object(l.a)(e,2),s=n[0],a=n[1],r=Object(c.useState)(""),o=Object(l.a)(r,2),i=o[0],d=o[1],b=Object(c.useRef)(null),p=Object(c.useRef)(null),h=function(t){var e=Object(c.useRef)();return Object(c.useEffect)((function(){e.current=t})),e.current}(s);var f=Object(u.jsxs)("form",{className:"stack-small",onSubmit:function(e){e.preventDefault(),i.trim()&&(t.editTask(t.id,i),d(""),a(!1))},children:[Object(u.jsxs)("div",{className:"form-group",children:[Object(u.jsxs)("label",{className:"todo-label",htmlFor:t.id,children:["New text for ",t.text]}),Object(u.jsx)("input",{id:t.id,className:"todo-text",type:"text",value:i,onChange:function(t){d(t.target.value)},ref:b})]}),Object(u.jsxs)("div",{className:"btn-group",children:[Object(u.jsxs)("button",{type:"button",className:"btn todo-cancel",onClick:function(){return a(!1)},children:["Cancel",Object(u.jsxs)("span",{className:"visually-hidden",children:["renaming ",t.text]})]}),Object(u.jsxs)("button",{type:"submit",className:"btn btn__primary todo-edit",children:["Save",Object(u.jsxs)("span",{className:"visually-hidden",children:["new text for ",t.text]})]})]})]}),m=Object(u.jsxs)("div",{className:"stack-small",children:[Object(u.jsxs)("div",{className:"c-cb",children:[t.important?Object(u.jsx)("div",{className:"img-container",children:Object(u.jsx)("img",{className:"important",src:j,alt:""})}):"",Object(u.jsx)("p",{className:"name",children:t.text})]}),Object(u.jsxs)("div",{className:"btn-group",children:[Object(u.jsxs)("button",{type:"button",className:"btn",onClick:function(){return a(!0)},ref:p,children:["Edit ",Object(u.jsx)("span",{className:"visually-hidden",children:t.text})]}),Object(u.jsxs)("button",{type:"button",className:"btn btn__danger",onClick:function(){return t.deleteTask(t.id)},children:["Delete ",Object(u.jsx)("span",{className:"visually-hidden",children:t.text})]})]})]});return Object(c.useEffect)((function(){!h&&s&&b.current.focus(),h&&!s&&p.current.focus()}),[h,s]),Object(u.jsx)("li",{className:"todo",children:s?f:m})}var h=n(9),f="https://webapp-210415230904.azurewebsites.net/api/Notebook",m=function(t){return fetch("".concat(f,"/Notes"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t})}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))};function O(t){for(var e=t+"=",n=document.cookie.split(";"),c=0;c<n.length;c++){for(var s=n[c];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(e))return s.substring(e.length,s.length)}return null}function x(t,e){return t.props.important<e.props.important?1:t.props.important>e.props.important?-1:0}var g={All:function(){return!0},Unimportant:function(t){return!t.important},Important:function(t){return t.important}},v=Object.keys(g);var k=function(t){var e=Object(c.useState)(t.tasks),n=Object(l.a)(e,2),s=n[0],a=n[1],r=Object(c.useState)("All"),j=Object(l.a)(r,2),m=j[0],k=j[1];function N(t){var e=s.map((function(e){return t===e.id?Object(i.a)(Object(i.a)({},e),{},{important:!e.important}):e}));a(e)}function y(t){var e=s.filter((function(e){return t!==e.id}));!function(t){fetch("".concat(f,"/").concat(t),{method:"DELETE"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}(t),a(e)}function T(t,e){var n=s.map((function(n){return t===n.id?(function(t,e){fetch("".concat(f,"/").concat(t),{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).catch((function(t){return console.log(t)}))}(t,{id:t,text:e,important:n.important,UserToken:O("token")}),Object(i.a)(Object(i.a)({},n),{},{text:e})):n}));a(n)}var S=s.filter(g[m]).map((function(t){return Object(u.jsx)(p,{id:t.id,text:t.text,important:t.important,toggleTaskImportant:N,deleteTask:y,editTask:T},t.id)})).sort(x),w=v.map((function(t){return Object(u.jsx)(b,{text:t,isPressed:t===m,setFilter:k},t)})),C=1!==S.length?"tasks":"task",_="".concat(S.length," ").concat(C," remaining"),E=Object(c.useRef)(null),U=function(t){var e=Object(c.useRef)();return Object(c.useEffect)((function(){e.current=t})),e.current}(s.length);return Object(c.useEffect)((function(){s.length-U===-1&&E.current.focus()}),[s.length,U]),Object(u.jsxs)("div",{className:"todoapp stack-large",children:[Object(u.jsx)(d,{addTask:function(t,e){var n,c={id:"todo-"+Object(h.a)(),text:t,important:e};n={text:t,important:e,UserToken:O("token")},fetch(f,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()})).catch((function(t){return console.log(t)})),a([].concat(Object(o.a)(s),[c]))}}),Object(u.jsx)("div",{className:"filters btn-group stack-exception",children:w}),Object(u.jsx)("h2",{id:"list-heading",tabIndex:"-1",ref:E,children:_}),Object(u.jsx)("ul",{role:"list",className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading",children:S})]})};null==O("token")?fetch("https://webapp-210415230904.azurewebsites.net/api/Users",{method:"GET"}).then((function(t){return t.json()})).catch((function(t){return console.log(t)})).then((function(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:365,c="";if(n){var s=new Date;s.setTime(s.getTime()+24*n*60*60*1e3),c="; expires="+s.toUTCString()}document.cookie=t+"="+(e||"")+c+"; path=/"}("token",t.token)})).then((function(){m(O("token")).then((function(t){console.log(t),r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(k,{tasks:t})}),document.getElementById("root"))}))})):m(O("token")).then((function(t){console.log(t),r.a.render(Object(u.jsx)(s.a.StrictMode,{children:Object(u.jsx)(k,{tasks:t})}),document.getElementById("root"))}))}},[[16,1,2]]]);
//# sourceMappingURL=main.826dc9e7.chunk.js.map